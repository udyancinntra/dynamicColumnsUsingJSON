views.py in app :

class SendEmailView(View):
    def get(self, request):
        email = EmailMessage(
            'Subject of mail sent by Django',
            'Content of mail sent by Django',
            'tejasgulati11227@gmail.com',  # my mail
            ['alternate11227@gmail.com']   #person i want to send mail
        )
        
        # Path to the .txt file to be attached
        file_path = os.path.join(os.path.dirname(__file__), 'sample.txt')  # put file in same level as views.py
        if os.path.exists(file_path):
            email.attach_file(file_path)
        
        try:
            email.send()
            return HttpResponse('Email sent successfully')
        except Exception as e:
            return HttpResponse(f'Failed to send email. Error: {str(e)}')

urls.py :

from django.urls import path
from student.views import SendEmailView
from student import views

urlpatterns = [


    path("send_email/", SendEmailView.as_view(), name="send_email"),
]


project settings.py:


EMAIL_BACKEND = 'django.core.mail.backends.smtp.EmailBackend'
EMAIL_HOST = 'smtp.gmail.com'
EMAIL_PORT = 465
EMAIL_USE_SSL = True
EMAIL_HOST_USER = 'tejasgulati11227@gmail.com'
EMAIL_HOST_PASSWORD = 'ryge usdi smyn xxxx'  #secret key generated by 2 step verification google.
